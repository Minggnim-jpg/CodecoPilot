appId: com.codepal.app
productName: codepal
directories:
  output: release
files:
  - dist-electron/**/*
  - "!node_modules"
  - "!src"
  - "!electron"
  - "!.next"
  - "!build"
  - "!scripts"
  - "!docs"
  - "!release"
  - "!data"
extraResources:
  - from: .next/standalone/
    to: standalone/
    filter:
      - "**/*"
      - "!node_modules"
      - "!release"
  - from: .next/standalone/node_modules/
    to: standalone/node_modules/
    filter: ["**/*"]
  - from: .next/standalone/.next/
    to: standalone/.next/
    filter: ["**/*"]
  - from: .next/static/
    to: standalone/.next/static/
    filter: ["**/*"]
  - from: public/
    to: standalone/public/
    filter: ["**/*"]
  - from: build/
    to: .
    filter: ["codepal.*"]
afterPack: scripts/after-pack.js
asarUnpack:
  - "**/*.node"
  - "**/better-sqlite3/**"
mac:
  icon: build/codepal.icns
  category: public.app-category.developer-tools
  artifactName: "${productName}-${version}-${arch}.${ext}"
  target:
    - target: dmg
      arch: [arm64, x64]
win:
  icon: build/codepal.ico
  target:
    - target: nsis
      arch: [x64, arm64]
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  deleteAppDataOnUninstall: false
linux:
  icon: build/codepal.png
  category: Development
  artifactName: "${productName}-${version}-${arch}.${ext}"
  desktop:
    entry:
      Name: codepal
      Comment: A native desktop GUI for Claude Code
      Categories: Development;IDE;
      StartupWMClass: codepal
  target:
    - target: AppImage
      arch: [x64, arm64]
    - target: deb
      arch: [x64, arm64]
    - target: rpm
      arch: [x64, arm64]
